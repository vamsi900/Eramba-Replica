<div class="main-div">
  <div>
    <div class="heading-div">
      <p class="heading"><i class="material-icons">layers</i><span class="asset-title">Asset Identification</span></p>
      <small class="small">Describes all assets in the scope of this GRC program.</small>
    </div>
    <div class="toolbar-div">
      <hr class="hr-top"> 
      <mat-toolbar class="main3">
        <i class="material-icons slash">home</i>
        <a class="text-link" href="#">Dashboard</a><span class="slash">/</span><a class="text-link" href="#">Internal Controls</a><span class="slash">/</span><a class="text-link" href="#">Default Index</a>

        <!-- <div class="dropdown actions-dropdown">
            <p class="btn dropdown-toggle actions-dropdown-toggle" data-toggle="dropdown">Actions
            <span class="caret"></span></p>
            <ul class="dropdown-menu">
              <li (click)="openDialog()" class="dropdown-items"><i class="material-icons icon-align">add</i>Add</li>
              <li class="dropdown-items"><i class="material-icons icon-align">playlist_add</i>Import</li>
            </ul>
        </div> -->
        <div class="btn-group actions-dropdown">
            <p class="btn dropdown-toggle actions-dropdown-toggle" data-toggle="dropdown">
              Actions
            </p>
            <ul class="dropdown-menu dropdown-menu-right">
              <!-- <li (click)="openDialog()" class="dropdown-items"><i class="material-icons icon-align">add</i>Add</li> -->
              <li data-toggle="modal" data-target="#myModal" class="dropdown-items" ><i class="material-icons icon-align">add</i>Add</li>
              <li class="dropdown-items"><i class="material-icons icon-align">playlist_add</i>Import</li>
            </ul>
        </div>

      </mat-toolbar>
      <hr class="hr-bottom">
    </div>

  </div>

  <div class="background">
    <div class="card">
      <div class="card-header">
        <h4 class="all-items">All Items</h4>
        <p class="results">10 Results - Filter that shows everything</p>
      </div>

      <div class="card-body">
        <div class="example-button-row" >
        <p class="btn btn-sm"><span class="btn-text">LIMIT IS UNLIMITED</span></p>
        <p class="btn btn-sm"><span class="btn-text">ORDER BY CREATED</span></p>
        <p class="btn btn-sm"><span class="btn-text">SORT IS DESCENDING</span></p>
        </div>
        <br>

        <div class="filter row">
          <p class="filter-text">Filter: </p><input placeholder="Type to filter..." type="text" style="margin:15px;float: right;width: auto;" [(ngModel)]="searchKeyword">
        </div>
      </div>

      <!-- <table mat-table [dataSource]="assets" class="mat-elevation-z8">

        <ng-container matColumnDef="select">
          <th mat-header-cell *matHeaderCellDef>
            <mat-checkbox (change)="$event ? masterToggle() : null"
                          [checked]="selection.hasValue() && isAllSelected()"
                          [indeterminate]="selection.hasValue() && !isAllSelected()"
                          [aria-label]="checkboxLabel()">
            </mat-checkbox>
          </th>
          <td mat-cell *matCellDef="let row">
            <mat-checkbox (click)="$event.stopPropagation()"
                          (change)="$event ? selection.toggle(row) : null"
                          [checked]="selection.isSelected(row)"
                          [aria-label]="checkboxLabel(row)">
            </mat-checkbox>
          </td>
        </ng-container>
      
        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef> Actions </th>
          <td mat-cell *matCellDef="let element"><i class="material-icons">menu</i></td>
        </ng-container>
      
        <ng-container matColumnDef="status">
          <th mat-header-cell *matHeaderCellDef> Status </th>
          <td mat-cell *matCellDef="let element"><p class="btn status-dropdown"><span class="status-dropdown-span">REVIEW EXPIRED<i class="material-icons">keyboard_arrow_down</i></span></p> </td>
        </ng-container>
      
        <ng-container matColumnDef="reviews">
          <th mat-header-cell *matHeaderCellDef> Reviews </th>
          <td mat-cell *matCellDef="let element"> <span class="status-dropdown-span">2<i class="material-icons">keyboard_arrow_down</i></span></td>
        </ng-container>
      
        <ng-container matColumnDef="related_business_units">
          <th mat-header-cell *matHeaderCellDef> Related Business Units </th>
          <td mat-cell *matCellDef="let element"> {{element.unit}} </td>
        </ng-container>

        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef> Name</th>
          <td mat-cell *matCellDef="let element"> {{element.name}} </td>
        </ng-container>
      
        <ng-container matColumnDef="description">
          <th mat-header-cell *matHeaderCellDef> Description </th>
          <td mat-cell *matCellDef="let element"> {{element.description}} </td>
        </ng-container>
      
        <ng-container matColumnDef="label">
          <th mat-header-cell *matHeaderCellDef> Label </th>
          <td mat-cell *matCellDef="let element"> {{element.label}} </td>
        </ng-container>
      
        <ng-container matColumnDef="type">
          <th mat-header-cell *matHeaderCellDef> Type </th>
          <td mat-cell *matCellDef="let element"> {{element.type}} </td>
        </ng-container>
      
        <ng-container matColumnDef="liabilities">
          <th mat-header-cell *matHeaderCellDef> Liabilities </th>
          <td mat-cell *matCellDef="let element"> {{element.liability}} </td>
        </ng-container>
      
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="selection.toggle(row)">
        </tr>
      </table> -->
      <div *ngIf="showhide">
        This is a test
      </div>

      <div class="table-responsive">
        <table class="table">
          <thead>
            <tr>
              <th><mat-checkbox></mat-checkbox></th>
              <th scope="col">Actions</th>
              <th scope="col">Status</th>
              <!-- <th scope="col">Reviews</th> -->
              <th scope="col">Related Business Units</th>
              <th scope="col">Name</th>
              <th scope="col">Description</th>
              <th scope="col">Label</th>
              <th scope="col">Type</th>
              <th scope="col">Liabilities</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let asset of assets | search : searchKeyword; let in = index">
              <!-- <th scope="row">1</th> -->
              <td><mat-checkbox  type="checkbox" (click)="showhide = true"></mat-checkbox></td>
              <td>
                <i class="material-icons btn" id="dropdownMenuButton" data-toggle="dropdown">menu</i>
                 <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
                    <li class="dropdown-item" (click)="edit(asset)" data-toggle="modal" data-target="#myEditModal"><i class="material-icons menu-dropdown">edit</i>Edit</li>
                    <li class="dropdown-item"><i class="material-icons menu-dropdown">history</i>History</li>
                    <li class="dropdown-item" (click)="delete(asset)"><i class="material-icons menu-dropdown">delete</i>Delete</li>
                    <li class="dropdown-item"><i class="material-icons menu-dropdown">share</i>Share</li>
                  </ul>
              </td>
              <td><p class="btn status-dropdown"><span class="status-dropdown-span">REVIEW EXPIRED<i class="material-icons">keyboard_arrow_down</i></span></p></td>
              <!-- <span class="status-dropdown-span">2<i class="material-icons">keyboard_arrow_down</i></span> -->
              <td>{{asset.unit}}</td>
              <td data-toggle="tooltip" data-placement="top" title="{{asset.name}}">{{asset.name}}</td>
              <td data-toggle="tooltip" data-placement="top" title="{{asset.description}}">{{asset.description}}</td>
              <td>{{asset.label}}</td>
              <td>{{asset.type}}</td>
              <td>{{asset.liability}}</td>
            </tr>
          </tbody>
        </table>
      </div>

    </div>
  </div>

</div>

<!-- Modal to add data -->

<div>
  <div id="myModal" class="modal fade" role="dialog">
    <div class="modal-dialog modal-lg">
  
      <div class="modal-content">
        <div class="modal-header">
            <p>Add item (Asset Identification)</p>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          
        </div>
        <div class="modal-body">
          
<!-- <mat-divider></mat-divider> -->
<mat-tab-group mat-align-tabs="start" animationDuration="0ms">
  <mat-tab label="General"> 
    <form (submit)="onSubmit(postForm)" #postForm="ngForm" validate>
    <div class="container my-custom-scrollbar">
      <div class="row">
        <div class="col-sm-12">
          <br>
            <label>Related Business Units</label>
            <select class="form-control custom-select" name="unit" #unit="ngModel" ngModel>
                <option value=""></option>
                <option *ngFor="let unit of businessUnits" [ngValue]="unit">{{unit}}</option>
            </select>
            <small class="small">One or More Business Units (Organisation / Business Units) that are associated with this asset</small>
          <br>
          <br>
          
          <div>
          <label>Name</label>
          <input class="form-control" type="text" name="name" #name="ngModel" ngModel required autocomplete="off" rows="5" >
          <small class="small">Name of the asset</small>
          </div>
          <br>
    
          <div>
          <label>Description</label>
          <textarea class="form-control" type="text" name="description" #description="ngModel" ngModel required autocomplete="off" rows="5" ></textarea>
          <small class="small">OPTIONAL: Give a brief description for this asset</small>
          </div>
          <br>

          <label>Label</label>
          <select class="form-control custom-select" name="label" #label="ngModel" ngModel>
              <option value="">Choose One</option>
              <option *ngFor="let label of Label" [ngValue]="label">{{label}}</option>
          </select>
          <small class="small">OPTIONAL: Labels refer to the type of asset being created, typical examples are Confidential, Private, Etc. Labels are defined at Asset Management/Settings/Labels</small>
          <br>
          <br>

          <label>Type</label>
          <select class="form-control custom-select" name="type" #type="ngModel" ngModel>
              <option value="">Data Asset</option>
              <option *ngFor="let type of Type" [ngValue]="type">{{type}}</option>
          </select>
          <small class="small">Based on the type of asset eramba will suggest you possible threats and vulnerabilities (at the time you perform Risk Management).
              If you are also interested in Data Asset Flows (Asset Management / Data Flows) you need to select "Data Asset"
           </small>
          <br>
          <br>

          <label>Assets</label>
          <select class="form-control custom-select" name="asset" #asset="ngModel" ngModel>
              <option value=""></option>
              <option *ngFor="let asset of Assets" [ngValue]="asset">{{asset}}</option>
          </select>
          <small class="small">OPTIONAL: Select one or more related assets</small>
          <br>
          <br>

          <label>Liabilities</label>
          <select class="form-control custom-select" name="liability" #liability="ngModel" ngModel>
              <option value=""></option>
              <option *ngFor="let liability of Liabilities" [ngValue]="liability">{{liability}}</option>
          </select>
          <br>
          <br>
          <br>
          </div>
        </div>
      </div>
    <hr>
    <div class="btn-div">
      <!-- <button class="btn" style="margin: 10px" type="button"  (click)="onNoClick()">Close</button> -->
      <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      <button class="btn btn-primary" style="margin: 10px" type="submit">Save</button>
    </div>
    </form>

  </mat-tab>

  <mat-tab label="Asset Owner"> 
    <form validate>
      <!-- <div class="container">
          <div class="row">
            <div class="col-sm-12">
              <br>
              <div>
                <label>Owner</label>
               <input type="text" class="form-control input-field" [(ngModel)]="newServerName">
                <small class="small">Select one or more user accounts or groups that are associated as owners of this asset</small>
              </div>
              <br>
        
              <div>
                <label>Guardian</label>
                <input type="text" class="form-control input-field" [(ngModel)]="newServerName">
                <small class="small">Select one or more user accounts or groups that are associated as guardians of this asset</small>
              </div>
              <br>
        
              <div>
                <label>User</label>
                <input type="text" class="form-control input-field" [(ngModel)]="newServerName">
                <small class="small">Select one or more user accounts or groups that are associated as users of this asset</small>
                </div>
              <br>
              
            </div>
          </div>
      </div>
        <hr>
        <div class="btn-div">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            <button class="btn btn-primary" style="margin: 10px">Save</button>
        </div>     -->
    </form>
  </mat-tab>
  
  <mat-tab label="Asset Classification">

      <div class="container">
          <div class="row">
            <div class="col-sm-12">

              <br>
                <span>
                    <button class="btn card dropdown-toggle classification-dropdown-toggle" type="button" data-toggle="dropdown">Classification: Availability
                    <span class="caret"></span></button>
                    <ul class="dropdown-menu classification-dropdown">
                      <li class="dropdown-items container"><input type="text" style="width: 100%" [(ngModel)]="searchKeyword"class="form-control"></li>
                    </ul>
                </span>

                <br>
                <span>
                    <button class="btn card dropdown-toggle classification-dropdown-toggle" type="button" data-toggle="dropdown">Classification: Confidentiality
                    <span class="caret"></span></button>
                    <ul class="dropdown-menu classification-dropdown">
                        <li class="dropdown-items container"><input type="text" style="width: 100%" [(ngModel)]="searchKeyword"class="form-control"></li>
                    </ul>
                </span>

                <br>
                <div>
                    <button class="btn card dropdown-toggle classification-dropdown-toggle" type="button" data-toggle="dropdown">Classification: Integrity
                    <span class="caret"></span></button>
                    <ul class="dropdown-menu classification-dropdown">
                        <li class="dropdown-items container"><input type="text" style="width: 100%" [(ngModel)]="searchKeyword"class="form-control"></li>
                    </ul>
                </div>
            </div>
          </div>
        </div>
        <hr>
        <div class="btn-div">
            <button class="btn btn-primary" style="margin: 10px" >Save</button>
            <!-- <button class="btn" style="margin: 10px" data-dismiss="modal" type="button">Close</button>  -->
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
  </mat-tab>
</mat-tab-group>
        </div>
      </div>
  
    </div>
  </div>
</div>


<!-- Modal to edit data -->
<div>
    <div id="myEditModal" class="modal fade" role="dialog">
      <div class="modal-dialog">
    
        <div class="modal-content">
          <div class="modal-header">
              <h3>Add item (Asset Identification)</h3>
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            
          </div>
          <div class="modal-body">
            
  <mat-divider></mat-divider>
  <mat-tab-group mat-align-tabs="start" animationDuration="0ms">
    <mat-tab label="General"> 
      <form (ngSubmit)="updateAsset()" #postEditForm="ngForm" validate>
      <div class="container my-custom-scrollbar">
        <div class="row">
          <div class="col-sm-12">
            <br>
              <label>Related Business Units</label>
              <select class="form-control custom-select" name="unit" #unit="ngModel" [(ngModel)]="editdata.unit" ngModel>
                  <option value=""></option>
                  <option *ngFor="let unit of businessUnits" [ngValue]="unit">{{unit}}</option>
              </select>
              <small>One or More Business Units (Organisation / Business Units) that are associated with this asset</small>
            <br>
            <br>
            
            <div>
            <label>Name</label>
            <input class="form-control" type="text" name="name" #name="ngModel" ngModel [(ngModel)]="editdata.name" required autocomplete="off" rows="5" >
            <small class="small">Name of the asset</small>
            </div>
            <br>
      
            <div>
            <label>Description</label>
            <textarea class="form-control" type="text" name="description" #description="ngModel" ngModel [(ngModel)]="editdata.description" required autocomplete="off" rows="5" ></textarea>
            <small class="small">OPTIONAL: Give a brief description for this asset</small>
            </div>
            <br>
  
            <label>Label</label>
            <select class="form-control custom-select" name="label" #label="ngModel" ngModel [(ngModel)]="editdata.label">
                <option value="">Choose One</option>
                <option *ngFor="let label of Label" [ngValue]="label">{{label}}</option>
            </select>
            <small class="small">OPTIONAL: Labels refer to the type of asset being created, typical examples are Confidential, Private, Etc. Labels are defined at Asset Management/Settings/Labels</small>
            <br>
            <br>
  
            <label>Type</label>
            <select class="form-control custom-select" name="type" #type="ngModel" ngModel [(ngModel)]="editdata.type">
                <option value="">Data Asset</option>
                <option *ngFor="let type of Type" [ngValue]="type">{{type}}</option>
            </select>
            <small class="small">Based on the type of asset eramba will suggest you possible threats and vulnerabilities (at the time you perform Risk Management).
                If you are also interested in Data Asset Flows (Asset Management / Data Flows) you need to select "Data Asset"
             </small>
            <br>
            <br>
  
            <label>Assets</label>
            <select class="form-control custom-select" name="asset" #asset="ngModel" ngModel [(ngModel)]="editdata.asset">
                <option value=""></option>
                <option *ngFor="let asset of Assets" [ngValue]="asset">{{asset}}</option>
            </select>
            <small class="small">OPTIONAL: Select one or more related assets</small>
            <br>
            <br>
  
            <label>Liabilities</label>
            <select class="form-control custom-select" name="liability" #liability="ngModel" ngModel [(ngModel)]="editdata.liability">
                <option value=""></option>
                <option *ngFor="let liability of Liabilities" [ngValue]="liability">{{liability}}</option>
            </select>
            <br>
            <br>
            <br>
            </div>
          </div>
        </div>
      <hr>
      <div class="btn-div">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button class="btn btn-primary" style="margin: 10px" type="submit">Save</button>
      </div>
      </form>
  
    </mat-tab>
  
    <mat-tab label="Asset Owner"> 
    
        <div class="container">
            <div class="row">
              <div class="col-sm-12">
               
                <div>
                  <label>Owner</label>
                  <span class="row"><input type="text" class="form-control input-field col-10" [(ngModel)]="newServerName"><button type="button" class="col-1 btn add-btn btn-primary">Add</button></span>
                  <small class="small">Select one or more user accounts or groups that are associated as owners of this asset</small>
                </div>
                <br>
          
                <div>
                  <label>Guardian</label>
                  <span class="row"><input type="text" class="form-control input-field col-10" [(ngModel)]="newServerName"><button type="button" class="col-1 btn add-btn btn-primary">Add</button></span>
                  <small class="small">Select one or more user accounts or groups that are associated as guardians of this asset</small>
                </div>
                <br>
          
                <div>
                  <label>User</label>
                  <span class="row"><input type="text" class="form-control input-field col-10" [(ngModel)]="newServerName"><button type="button" class="col-1 btn add-btn btn-primary">Add</button></span>
                  <small class="small">Select one or more user accounts or groups that are associated as users of this asset</small>
                  </div>
                <br>
                
              </div>
            </div>
        </div>
          <hr>
          <div class="btn-div">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
              <button class="btn btn-primary" style="margin: 10px" (click)="onAddServer($event)">Save</button>
          </div>    
    </mat-tab>
    
    <mat-tab label="Asset Classification">
  
        <div class="container">
            <div class="row">
              <div class="col-sm-12">
                  <div class="dropdown actions-dropdown">
                      <button class="btn card dropdown-toggle assets-dropdown-toggle" type="button" data-toggle="dropdown">Classification: Availability
                      <span class="caret"></span></button>
                      <ul class="dropdown-menu asset-dropdown">
                        <li class="dropdown-items container"><input type="text" style="width: 100%" [(ngModel)]="searchKeyword"class="form-control"></li>
                      </ul>
                  </div>
  
                  <div class="dropdown actions-dropdown">
                      <button class="btn card dropdown-toggle assets-dropdown-toggle" type="button" data-toggle="dropdown">Classification: Confidentiality
                      <span class="caret"></span></button>
                      <ul class="dropdown-menu asset-dropdown">
                          <li class="dropdown-items container"><input type="text" style="width: 100%" [(ngModel)]="searchKeyword"class="form-control"></li>
                      </ul>
                  </div>
  
                  <div class="dropdown actions-dropdown">
                      <button class="btn card dropdown-toggle assets-dropdown-toggle" type="button" data-toggle="dropdown">Classification: Integrity
                      <span class="caret"></span></button>
                      <ul class="dropdown-menu asset-dropdown">
                          <li class="dropdown-items container"><input type="text" style="width: 100%" [(ngModel)]="searchKeyword"class="form-control"></li>
                      </ul>
                  </div>
              </div>
            </div>
          </div>
          <hr>
          <div class="btn-div">
              <button class="btn btn-primary" style="margin: 10px" (click)="onAddServer($event)">Save</button>
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
    </mat-tab>
  </mat-tab-group>
          </div>
        </div>
    
      </div>
    </div>
  </div>